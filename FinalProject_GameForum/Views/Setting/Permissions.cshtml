@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}
@model User


<head>
	<link rel="stylesheet" src="~/css/setting/setting/css" asp-append-version="true">
</head>

<body>
	<div class=" container mt-5 ">
		<div class="row">
			<div class="col-md-3">
				<div class="list-group" id="list-tab" role="tablist">
					<a class="list-group-item list-group-item-action " id="list-home-list" asp-action="Setting"
					   role="tab" aria-controls="list-home" onclick="high()">帳號設定</a>
					<a class="list-group-item list-group-item-action active" id="list-profile-list" asp-action="Permissions" role="tab"
					   aria-controls="list-profile" onclick="high()">權限</a>
				</div>
			</div>

			<div class="col-md-8">
				<div class="card p-4 border shadow-sm">
					<h5 class="card-titles d-flex align-items-center">
						第三方帳號管理
						<span class="fs-6" style="color: gray;">(綁定後可使用第三方帳號登入)</span>
					</h5>
					<div class="container mt-3">
						<div class="row">

							<!-- Google -->
							<div class="col-6 mb-3 d-flex justify-content-between align-items-center">
								<div class="d-flex align-items-center">
									<img src="~/img/Login/web_light_rd_na@1x.png" width="30" class="me-2">
									<span class="fs-5">Google</span>
									<span class="fs-6 ms-2 text-secondary">@(Model.Provider == "Google" ? "(已綁定)" : ("未綁定"))</span>
								</div>
								@if (Model.Provider == "Google")
								{
									<a href="/Setting/UnbindThirdLogin"
									   onclick="return confirm('確定要解除綁定 Google 嗎？');"
									   type="button" class="btn btn-sm btn-danger">
										解除綁定
									</a>
								}
								else
								{
									<a href="@(Model.Provider != "Google"  && Model.Provider   != null ? "#" : "/Setting/BindThirdLogin?provider=Google")"
									   type="button" class="btn btn-sm  @(Model.Provider != "Google" && Model.Provider   != null ? "btn-secondary  disabled"  : "btn-success")">
										進行綁定
									</a>
								}
							</div>

							<!-- Facebook -->
							<div class="col-6 mb-3 d-flex justify-content-between align-items-center">
								<div class="d-flex align-items-center">
									<img src="~/img/Login/icons8-facebook-48.png" width="30" class="me-2">
									<span class="fs-5">Facebook</span>
									<span class="fs-6 ms-2 text-secondary">@(Model.Provider == "Facebook" ? "(已綁定)" : ("未綁定"))</span>
								</div>
								@if (Model.Provider == "Facebook")
								{
									<a href="/Setting/UnbindThirdLogin"
									   onclick="return confirm('確定要解除綁定 Google 嗎？');"
									   type="button" class="btn btn-sm btn-danger">
										解除綁定
									</a>
								}
								else
								{
									<a href="@(Model.Provider != "Facebook"  && Model.Provider   != null ? "#" : "/Setting/BindThirdLogin?provider=Facebook")"
									   type="button" class="btn btn-sm  @(Model.Provider != "Facebook" && Model.Provider   != null ? "btn-secondary  disabled"  : "btn-success")">
										進行綁定
									</a>
								}
							</div>

							<!-- Microsoft -->
							<div class="col-6 mb-3 d-flex justify-content-between align-items-center">
								<div class="d-flex align-items-center">
									<img src="~/img/Login/Microsoft.png" width="30" class="me-2">
									<span class="fs-5">Microsoft</span>
									<span class="fs-6 ms-2 text-secondary">@(Model.Provider == "Microsoft" ? "(已綁定)" : ("未綁定"))</span>
								</div>
								@if (Model.Provider == "Microsoft")
								{
									<a href="/Setting/UnbindThirdLogin"
									   onclick="return confirm('確定要解除綁定 Google 嗎？');"
									   type="button" class="btn btn-sm btn-danger">
										解除綁定
									</a>
								}
								else
								{
									<a href="@(Model.Provider != "Microsoft"  && Model.Provider   != null ? "#" : "/Setting/BindThirdLogin?provider=Microsoft")"
									   type="button" class="btn btn-sm  @(Model.Provider != "Microsoft" && Model.Provider   != null ? "btn-secondary  disabled"  : "btn-success")">
										進行綁定
									</a>
								}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	@if (TempData["ThirdError"] != null)
	{
		<script>
				  document.addEventListener("DOMContentLoaded", function () {
				var errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
				errorModal.show();
			});
		</script>



		<!-- Bootstrap 5 Modal -->
		<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="errorModalLabel">錯誤</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						@TempData["ThirdError"]
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
					</div>
				</div>
			</div>
		</div>
	}

	@if (TempData["ThirdSuccess"] != null)
	{
		<script>
				  document.addEventListener("DOMContentLoaded", function () {
				var errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
				errorModal.show();
			});
		</script>



		<!-- Bootstrap 5 Modal -->
		<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="errorModalLabel">正確</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						@TempData["ThirdSuccess"]
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">關閉</button>
					</div>
				</div>
			</div>
		</div>
	}

	<script src="~/js/setting/setting.js"></script>


</body>

</html>